# Tasks

## Before beta 

- [ ] hello-world project generator
- [ ] alpha for images without matching dimensions
- [ ] record timestamp when a page started executing, use in the result template
- [x] Node 8
- [ ] use pageObj.sourcePath when approving with new result instead of hard-coding the path
- [ ] test with large images
- [ ] test with complex page and example names
- [ ] test with exceptions thrown throughout the test process
- [ ] directory summaries for page folders
- [x] skip empty files (instead of blowing up)
- [ ] Solve cross-linking (eg replace .md in local links to .html when generating html)
- [x] detect examples with the same name on a page
- [ ] support `image/*` content types for content/contentType fixtures
  - [ ] make sure we can get the right dimensions from headless chrome
- [ ] Enable people to extend/plug easier
  - [ ] add more parsers
- [ ] test overlay/positioning in other browsers
  - [ ] safari
  - [ ] firefox
- [x] handle gracefully cases where the expected result is provided, but the file is not present

## before 1.0

- [ ] AWS Lambda screenshots 
- [ ] Make it easier to inspect/approve
  - [x] CLI Approval instructions on the results page
  - [x] CLI Approval instructions on the rendered page (for all examples)
  - [x] Overview/Overlay/Inspect on the results page
    - [x] set view/opacity/zoom for actual/expected/diff separately
    - [ ] scale down large images so they are easier to see on the overview 
      - [ ] checkbox for original size/size to fit
- [ ] Distinguish between a failure and error
  - [x] record errors from fixtures
  - [x] display error as status when listing results
  - [ ] format/test error messages
    - [x] thrown as exceptions
    - [ ] thrown as strings
    - [ ] rejected from a promise
- [ ] Fixture execution
  - [x] inside node
    - [x] detect and parse example format (eg json or yaml)
    - [x] pass fixture parameters in the context
    - [x] pass temporary working dir
    - [x] allow fixtures to return a file
  - [x] URL fixture execution (eg test the same site in various resolutions)
  - [ ] in-browser fixture execution
    - [ ] record after page load
    - [ ] record after network idle
    - [ ] record after custom event
  - [ ] webpack fixture packaging
  - [ ] AWS Lambda fixture engine
- [ ] Extend example properties
  - [x] Configurable clip area for screenshots
  - [x] Configurable initial size for html windows
  - [ ] Configurable image matching precision and anti-aliasing
- [ ] Extract configuration/enable overrides
  - [x] Configurable source and work directories (don't just dump stuff to temp)
  - [x] Configurable clip area for screenshots
  - [x] Configurable initial size for html windows
  - [x] Configurable image matching precision 
  - [ ] + and anti-aliasing
  - [x] Configurable HTML attributes (`data-example`)
  - [ ] Configurable HTML classes for success/failure
  - [x] Configurable screenshot engine
  - [x] Configurable fixture engines (via NPM modules)
  - [ ] Config file to set all options quickly
- [ ] Server for interactive work
  - [ ] render example folder structure + README.md for folders
  - [ ] render markdown from the examples folder 
  - [ ] offer running the spec if the MD contains any examples
  - [ ] approving changes
  - [ ] Running tests by directly reading specs from github (eg public site, connect to a gitub repo)
  - [ ] Approving by directly committing to github? (eg for specs stored in github repos)
- [ ] Result formatters 
  - [x] JSON
  - [ ] junit
  - [ ] tap
- [ ] Reporters
  - [ ] ASCII console
  - [x] ANSI color console
  - [ ] Summary (dot)
- [ ] CLI/NPM tasks
  - [ ] executing tests
   - [x] run all tests 
   - [ ] run a specific page
   - [ ] run a specific example
   - [x] exit with -1 in case of errors/failures
  - [ ] approving changes
   - [x] approve a whole page
   - [x] approve a specific example
   - [ ] approve all failed examples


# Released in Alpha

- [x] breadcrumbs on rendered page -> links
- [x] Start/stop chrome once per run, not once per page
- [x] navigation on results page (breadcrumbs and page links)
- [x] Retina screen sizing
- [x] change sync FS operations to async
- [x] put example name into the example object/results object for easier templating
- [x] use timestamps for executed and started in result template
- [x] test with multiple examples in a single file
- [x] test with multiple files
- [x] test with files in subfolders
- [x] Choose a markdown rendering system (https://github.com/markdown-it)
- [x] Choose a Node DOM manipulation system (https://github.com/cheeriojs/cheerio)
- [x] Build local screenshots (using Chrome Headless and https://github.com/cyrus-and/chrome-remote-interface)
- [x] Choose an image comparison system (https://github.com/mapbox/pixelmatch)
- [x] generate a combined image if dimensions do not match, showing both images with alpha
- [x] Add a generic layout to HTML when converting from MD 
- [x] Add a generic template for result files
- [x] Create an index with all test results
- [x] Clean up templates and provide a nice layout
- [x] documentation on key usage scenarios
- [x] Run examples without expected outcomes (fail + show actual)
